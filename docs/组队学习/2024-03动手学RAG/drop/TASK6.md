### 文本多路召回与重排序

- 任务说明：实现多种文本编码和检索逻辑，并进行重排序

- 任务要求：

  - 结合文本索引和向量检索结果
  - 加载重排序模型，对检索进行重排序

- 打卡要求：完成多路召回与重排序，与任务5精度进行对比

  

### 多路召回逻辑

多路召回逻辑是在文本检索中常用的一种策略，其目的是**通过多个召回路径（或方法）综合获取候选文档，以提高检索的全面性和准确性**。单一的召回方法可能由于模型特性或数据特点而存在局限性，多路召回逻辑引入了多个召回路径，每个路径采用不同的召回方法。

- 实现方法1：将BM25的检索结果 和 语义检索结果 按照排名进行加权
- 实现方法2：按照段落、句子、页不同的角度进行语义编码进行检索，综合得到检索结果。

![img](img/TASK6/rag_hybrid_search.webp)

> 重排序逻辑（BM25 + BGE Rerank）

重排序逻辑是文本检索领域中一种重要的策略，主要用于优化原有文本检索方法返回的候选文档顺序，以提高最终的检索效果。在传统的文本检索方法中，往往采用打分的逻辑，如计算BERT嵌入向量之间的相似度。而重排序逻辑引入了更为复杂的文本交叉方法，通过特征交叉得到更进一步的打分，从而提高排序的准确性。

![img](img/TASK6/rag_rerank.png)

- 重排序逻辑常常使用更为强大的模型，如交叉编码器（cross-encoder）模型。这类模型能够更好地理解文本之间的交叉关系，捕捉更复杂的语义信息。
- 首先通过传统的嵌入模型获取初始的Top-k文档，然后使用重排序逻辑对这些文档进行重新排序。这样可以在保留初步筛选文档的基础上，更精确地排列它们的顺序。