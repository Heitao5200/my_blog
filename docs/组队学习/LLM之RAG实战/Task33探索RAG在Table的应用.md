
## RAG在表格解析中的挑战
- **复杂性**: 扫描文档或图像文档的复杂性，包括多元化的结构、非文本元素以及手写和打印内容的组合。
- **表格标题提取**: 如何提取表格标题并有效地链接到各自的表格。
- **索引结构设计**: 如何设计索引结构来有效地存储表的语义信息。

## 关键技术
### 表格分析
- **多模态LLM**: 使用GPT-4V等多模态LLM识别表格并提取信息。
- **表格检测模型**: 利用Table Transformer等专业模型辨别表格结构。
- **开源框架**: 使用unstructured等框架全面解析文档并提取表格。
- **端到端模型**: 使用Nougat、Donut等模型解析整个文档并提取表格。

### 索引结构
- **图像索引**: 使用图像格式的索引表。
- **纯文本或JSON索引**: 使用纯文本或JSON格式的索引表。
- **LaTeX格式索引**: 使用LaTeX格式的索引表。
- **表格摘要索引**: 仅为表的摘要编制索引。
- **文档摘要索引**: 结合小块内容（表的每一行信息或摘要）和大块内容（图像、纯文本或LaTeX格式的表）。

### 无需表解析的算法
- **VQA模型或多模态LLM**: 直接将相关图像和用户查询发送到模型并返回答案。
- **LLM直接回答**: 将相关文本格式的PDF页面和用户查询发送到LLM。

## 现有开源解决方案
- **LlamaIndex**: 支持多种方法，包括图像检索、图像推理、表格裁剪和OCR应用。
- **Langchain**: 提出了半结构化RAG和多模态RAG的解决方案。

## 建议的解决方案
- **表格解析**: 使用Nougat进行表格解析。
- **文档摘要索引结构**: 结合表格摘要和原始表内容。
- **表格摘要获取方法**: 通过LLM生成表格摘要。

### Nougat的原理与优缺点
- **原理**: 基于Donut开发，通过网络隐式识别文本。
- **优点**: 准确解析表格和公式，轻松关联表标题。
- **缺点**: 解析速度慢，对训练数据依赖性强，可能存在解析不一致问题。

### 代码实现
- **环境设置**: 安装Python包langchain。
- **表格解析**: 使用Nougat解析PDF文件，提取LaTeX格式的表格和文本格式的表格标题。
- **LLM摘要**: 对表格进行总结。
- **索引构建**: 使用Multi-Vector Retriever构建文档摘要索引结构。
- **RAG管道**: 构建RAG管道并执行查询。

## 结论
- 本文提出了一个结合表格解析、文档摘要索引结构和表格摘要获取方法的解决方案。
- 强调了工具的选择应基于实现正确想法的需求，而不是依赖特定工具。
- 讨论了RAG中表格处理的关键技术和现有解决方案，并提出了一个有效的解决方案。

## 参考文献
- 文章提供了多个参考文献链接，涉及多模态LLM、表格检测模型、端到端模型、开源解决方案等。



## 参考资料
[https://mp.weixin.qq.com/s/xrda9oe6esT81c2p2oanVA](https://mp.weixin.qq.com/s/xrda9oe6esT81c2p2oanVA)