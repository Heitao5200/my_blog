## LightGBM参数概述

基于树的模型的超参数可以分为 4 类：**影响决策树结构和学习的参数、影响训练速度的参数、提高精度的参数、防止过拟合的参数**

* 控制树结构的超参数：
  *  num_leaves：叶子节点数 (2^{max_depth})
  * max_depth：树深度 (3-8)
  * min_data_in_leaf：叶子节点向下分裂的的最小样本数，设置100，那么如果节点样本数量不够100就停止生长
* 提高准确性的超参数
  * learning_rate：梯度下降的步长参数，控制梯度提升学习的速度 (0.01 -0.3)
  * n_estimators：决策树的数量
  * max_bin： 变量分箱的数量越多，信息保留越详细 (255)
* 更多超参数来控制过拟合
  * lambda_l1：叶子节点数和叶子节点权重的惩罚，值越高惩罚越大
  * lambda_l2：叶子节点数和叶子节点权重的惩罚，值越高惩罚越大
  * min_gain_to_split：：分裂的最小增益，计算的增益不高，就无法向下分裂(0, 20)
  * bagging_fraction：训练每棵树的训练样本百分比 (0,1)
  * bagging_freq：默认0，表示bagging的频率，0意味着没有使用bagging，k意味着每k轮迭代进行一次bagging
  * feature_fraction：训练每棵树时要采样的特征百分比 (0,1)
  * bagging_fraction+bagging_freq参数必须同时设置 



还添加了`LightGBMPruningCallback`，这个`callback`类很方便，它可以在对数据进行训练之前检测出不太好的超参数集，从而显着减少搜索时间

## Optuna介绍

Optuna是一个超参数的优化工具，对基于树的超参数搜索进行了优化,依靠贝叶斯概率来确定哪些超参数选择是最有希望的并迭代调整搜索。

## Optuna优点

贝叶斯概率来确定哪些超参数选择是最有希望的并迭代调整搜索

能够设置条件超参数。因为许多超参数只有在与其他超参数组合使用时才更加有效。单独改变它们可能不会产生预期的效果。

TPESampler采样器：确保搜索将更加结构化和定向



Optuna将超参数优化描述为一个最小化/最大化目标函数的过程，该目标函数以一组超参数作为输入并返回其（验证）分数。该函数不依赖于外部定义的静态变量，动态构造神经网络结构的搜索空间

高效的采样和剪枝策略：Optuna会定期监测中间目标值并终止不符合预定条件的试验





